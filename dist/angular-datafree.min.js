(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(5),s=r(3);!function(t){n.module("ae.datafree",["ng"]).factory("DFClientFactory",["$http","$q",function(t,e){return new i.DFClientFactory(t,e)}]).factory("DFQuery",function(){return s.default}).constant("DFOrderDirection",s.DFOrderDirection).constant("DFDataResponseType",s.DFDataResponseType).directive("datafree",function(){return new o.DatafreeDirective}).directive("datafreeRow",function(){return new o.DatafreeRow}).directive("datafreeEmpty",function(){return new o.DatafreeEmpty}).directive("datafreePager",function(){return new o.DatafreePager}).directive("datafreeOrder",function(){return new o.DatafreeOrder})}(e.AngularDatafree||(e.AngularDatafree={}))},function(t,e){t.exports=(typeof window !== "undefined" ? window['angular'] : typeof global !== "undefined" ? global['angular'] : null)},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(3),o=r(4),s=r(1),a=function(){function t(t,e){this.$http=t,this.$q=e}return t.prototype.createClient=function(t){return new u(this.$http,this.$q,t)},t}();e.DFClientFactory=a;var u=function(t){function e(e,r,n){var i=t.call(this)||this;return i.$http=e,i.$q=r,i.query=n,i.withCredentials=!1,i}return n(e,t),Object.defineProperty(e.prototype,"$query",{get:function(){return this.query},set:function(t){this.query=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$headers",{get:function(){return this.headers},set:function(t){this.headers=t},enumerable:!0,configurable:!0}),e.prototype.buildQueryParams=function(t){void 0===t&&(t={});var e={},r=s.extend({},this.query.$settings,t);for(var n in r){var i=r[n]instanceof Function?r[n](r):r[n];this.query.$paramsMap.hasOwnProperty(n)?e[this.query.$paramsMap[n]]=i:e[n]=i}return e},e.prototype.handleResponse=function(t){return this.query.$dataResponseType===i.DFDataResponseType.BODY?(this.query.$total=parseInt(t.headers(this.query.$countProperty),10),t.data):(this.query.$total=parseInt(t.data[this.query.$countProperty],10),null!==this.query.$dataProperty?t.data[this.query.$dataProperty]:t.data)},e.prototype.dispatch=function(t){for(var e=0,r=this.listeners;e<r.length;e++){r[e].bind(this,t)()}},e.prototype.sendRequest=function(t){return this.$http({url:this.query.$url,params:this.buildQueryParams(t),method:this.query.$method,withCredentials:this.withCredentials,headers:this.headers})},e.prototype.send=function(t){var e=this,r=this.$q.defer();return this.sendRequest(t).then(function(t){var n=e.handleResponse(t);r.resolve(n),e.dispatch(n)},function(t){r.reject(t)}),r.promise},e.prototype.page=function(t){return this.query.$page=t,this.send()},e.prototype.prev=function(){return this.page(this.query.$page-1)},e.prototype.next=function(){return this.page(this.query.$page+1)},e.prototype.first=function(){return this.page(0)},e.prototype.last=function(){var t=this;if(null==this.query.$total||0==this.query.$total){var e=this.$q.defer();return this.sendRequest({page:0,limit:1}).then(function(r){t.handleResponse(r);var n=Math.ceil(t.query.$total/t.query.$limit)-1;t.page(n).then(function(t){e.resolve(t)},function(t){e.reject(t)})},function(t){e.reject(t)}),e.promise}var r=Math.ceil(this.query.$total/this.query.$limit)-1;return this.page(r)},e.prototype.limit=function(t){return this.query.$limit=t,this.page(0)},e.prototype.order=function(t,e){return this.query.$orderBy=t,this.query.$orderDirection=e,this.send()},e.prototype.filter=function(t){return this.query.$filter=t,this.first()},e}(o.Subscribeable);e.DFClient=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=function(){function t(t,e,r,i){void 0===e&&(e="GET"),this.url=t,this.method=e,this.settings={page:0,limit:10},this.dataResponseType=a.BODY,this.countProperty="X-Count",this.total=0,null!=r&&(this.settings=n.extend({},this.settings,r)),this.paramsMap=i,null==this.paramsMap&&(this.paramsMap=new o)}return Object.defineProperty(t.prototype,"$settings",{get:function(){return this.settings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$url",{get:function(){return this.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$method",{get:function(){return this.method},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$page",{get:function(){return this.settings.page},set:function(t){this.settings.page=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$limit",{get:function(){return this.settings.limit},set:function(t){this.settings.limit=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$order",{get:function(){return[this.settings.orderBy instanceof Function?this.settings.orderBy():this.settings.orderBy,this.settings.orderDirection]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$orderBy",{get:function(){return this.settings.orderBy instanceof Function?this.settings.orderBy():this.settings.orderBy},set:function(t){this.settings.orderBy=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$orderDirection",{get:function(){return this.settings.orderDirection},set:function(t){this.settings.orderDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$filter",{get:function(){return this.settings.filter instanceof Function?this.settings.filter():this.settings.filter},set:function(t){this.settings.filter=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$total",{get:function(){return this.total},set:function(t){this.total=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$paramsMap",{get:function(){return this.paramsMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$dataResponseType",{get:function(){return this.dataResponseType},set:function(t){this.dataResponseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$countProperty",{get:function(){return this.countProperty},set:function(t){this.countProperty=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$dataProperty",{get:function(){return this.dataProperty},set:function(t){this.dataProperty=t},enumerable:!0,configurable:!0}),t}();e.default=i;var o=function(){function t(){this.page="page",this.limit="limit",this.orderBy="order_by",this.orderDirection="order_direction",this.filter="q"}return t}();e.DFDefaultParamsMap=o;var s=function(){function t(){}return t}();s.ASC="ASC",s.DESC="DESC",e.DFOrderDirection=s;var a=function(){function t(){}return t}();a.PROPERTY="PROPERTY",a.BODY="BODY",e.DFDataResponseType=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.listeners=[]}return t.prototype.subscribe=function(t){this.listeners.push(t)},t.prototype.unsubscribe=function(t){this.listeners=this.listeners.filter(function(e){return e!==t})},t}();e.Subscribeable=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(6),o=r(3),s=function(){function t(){this.restrict="E",this.transclude=!0,this.bindToController=!0,this.template="<ng-transclude></ng-transclude>",this.controllerAs="$df",this.scope={query:"=?",client:"=?",autoload:"=?"},this.controller=["DFClientFactory",i.DatafreeDirectiveController]}return t}();e.DatafreeDirective=s;var a=function(){function t(){this.restrict="ACE",this.transclude="element",this.require="^^datafree",this.link=function(t,e,r,i,o){var s=e.parent(),a=function(t){s.html(""),(n.isArray(t)?t:[t]).forEach(function(t){o(function(e,r){r.data=t,s.append(e)})})};i.subscribe(a),t.$on("$destroy",function(){i.unsubscribe(a)})}}return t}();e.DatafreeRow=a;var u=function(){function t(){this.restrict="ACE",this.transclude="element",this.require="^^datafree",this.link=function(t,e,r,i,o){var s,a,u=function(t){null!=t&&(null!=t.show?t.show():a.append(t))},c=function(t){null!=t&&(null!=t.hide?t.hide():t.remove())},h=function(t){null!=s&&(null!=t&&(n.isArray(t)&&0===t.length||!n.isArray(t)&&n.isObject(t)&&Object.keys(t).length>0)?u(s):c(s))};i.subscribe(h),t.$on("$destroy",function(){i.unsubscribe(h)}),o(function(t,r){s=t,a=e.parent(),t.append(e.children()),e.parent().append(t)})}}return t}();e.DatafreeEmpty=u;var c=function(){function t(){this.restrict="E",this.require=["datafreePager","^^datafree"],this.scope={numberLimit:"@?",showFirst:"@?",showPrev:"@?",showNext:"@?",showLast:"@?",firstLabel:"@?",prevLabel:"@?",nextLabel:"@?",lastLabel:"@?"},this.templateUrl="datafree-pager.html",this.bindToController=!0,this.controllerAs="$pager",this.controller=i.DatafreePagerDirectiveController,this.link=function(t,e,r,n){n[0].datafree=n[1]}}return t}();e.DatafreePager=c;var h=function(){function t(){this.restrict="A",this.require="^^datafree",this.scope={column:"@datafreeOrder"},this.link=function(t,e,r,i){t.direction=null,e.addClass("orderable");var s=function(){var r=this.client.$query.$orderBy,n=this.client.$query.$orderDirection;t.column==r&&(e.addClass(n==o.DFOrderDirection.DESC?"order-desc":"order-asc"),t.direction=n)};i.subscribe(s),t.$on("$destroy",function(){i.unsubscribe(s)}),e.on("click",function(){n.forEach(e.parent().children(),function(t){n.element(t).removeClass("order-asc").removeClass("order-desc")});var r=t.direction;t.column!=i.client.$query.$orderBy&&null!=r||(r=r==o.DFOrderDirection.ASC?"DESC":"ASC"),i.order(t.column,r)})}}return t}();e.DatafreeOrder=h},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=function(t){function e(e){var r=t.call(this)||this;return r.clientFactory=e,r.autoload=!0,r.dataListener=function(t){r.data=t,r.dispatch(t)}.bind(r),r}return n(e,t),e.prototype.dispatch=function(t){var e=this;this.listeners.forEach(function(r){r.bind(e,t)()})},Object.defineProperty(e.prototype,"$data",{get:function(){return this.data},enumerable:!0,configurable:!0}),e.prototype.prev=function(){return this.client.prev()},e.prototype.next=function(){return this.client.next()},e.prototype.first=function(){return this.client.first()},e.prototype.last=function(){return this.client.last()},e.prototype.page=function(t){return this.client.page(t)},e.prototype.order=function(t,e){return this.client.order(t,e)},e.prototype.limit=function(t){return this.client.limit(t)},e.prototype.filter=function(t){return this.client.filter(t)},e.prototype.$onInit=function(){if(null!=this.query&&null==this.client)this.client=this.clientFactory.createClient(this.query);else if(null==this.query&&null==this.client)throw new Error("Either a DFQuery or a DFClient object must be provided to Datafree.");this.client.subscribe(this.dataListener)},e.prototype.$postLink=function(){1==this.autoload&&this.client.send()},e.prototype.$onDestroy=function(){this.client.unsubscribe(this.dataListener)},e}(i.Subscribeable);e.DatafreeDirectiveController=o;var s=function(){function t(){this.numberLimit=5,this.firstLabel="First",this.lastLabel="Last",this.prevLabel="Back",this.nextLabel="Next",this.showFirst=!0,this.showPrev=!0,this.showNext=!0,this.showLast=!0,this.numbers=[],this.currentPage=1,this.limit=10,this.maxPages=1,this.total=0}return t.prototype.prev=function(){this.currentPage>1&&this.datafree.prev()},t.prototype.next=function(){this.currentPage<this.maxPages&&this.datafree.next()},t.prototype.first=function(){this.datafree.first()},t.prototype.last=function(){this.datafree.last()},t.prototype.page=function(t){var e=t-1;e>=0&&e<this.maxPages&&this.datafree.page(e)},t.prototype.skipBack=function(){this.page(Math.max(1,this.currentPage-this.numberLimit))},t.prototype.skipForward=function(){this.page(Math.min(this.maxPages,this.currentPage+this.numberLimit))},t.prototype.$onInit=function(){this.dataChange=function(){this.currentPage=this.datafree.client.$query.$page+1,this.limit=this.datafree.client.$query.$limit,this.total=this.datafree.client.$query.$total,this.maxPages=Math.ceil(this.total/this.limit);var t=Math.floor(this.numberLimit/2);if(this.numbers=[],t>0)for(var e=Math.max(1,Math.min(this.maxPages-this.numberLimit+1,this.currentPage-t)),r=Math.min(e+this.numberLimit,this.maxPages+1),n=e;n<r;n++)this.numbers.push(n)}.bind(this)},t.prototype.$postLink=function(){this.datafree.subscribe(this.dataChange)},t.prototype.$onDestroy=function(){this.datafree.unsubscribe(this.dataChange)},t}();e.DatafreePagerDirectiveController=s}]);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1]);
