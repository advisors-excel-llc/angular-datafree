!function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=r(1),o=r(2),s=r(5);!function(t){n.module("ae.datafree",["ngResource"]).factory("DFClientFactory",o.default).directive("datafree",function(){return new s.DatafreeDirective}).directive("datafreeRow",function(){return new s.DatafreeRow}).directive("datafreeEmpty",function(){return new s.DatafreeEmpty}).directive("datafreePager",function(){return new s.DatafreePager}).directive("datafreeOrder",function(){return new s.DatafreeOrder})}(i||(i={})),e.default=i},function(t,e){t.exports=require("angular")},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=r(1),s=r(4),a=function(){function t(t){this.$http=t}return t.prototype.createClient=function(t){return new u(this.$http,t)},t}();e.default=a,a.$inject=["$http"];var u=function(t){function e(e,r){var i=t.call(this)||this;return i.$http=e,i.query=r,i.withCredentials=!1,i}return i(e,t),Object.defineProperty(e.prototype,"$query",{get:function(){return this.query},set:function(t){this.query=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$headers",{get:function(){return this.headers},set:function(t){this.headers=t},enumerable:!0,configurable:!0}),e.prototype.buildQueryParams=function(t){void 0===t&&(t={});var e={},r=o.extend({},this.query.$settings,t);for(var i in r){var n=r[i]instanceof Function?r[i](r):r[i];this.query.$paramsMap[i]?e[this.query.$paramsMap[i]]=n:e[i]=n}return e},e.prototype.handleResponse=function(t){return this.query.$settings.dataResponseType===n.DFDataResponseType.BODY?(this.query.$total=t.headers[this.query.$settings.countProperty.toLowerCase()],t.data):(this.query.$total=t.data[this.query.$settings.countProperty],null!==this.query.$settings.dataProperty?t.data[this.query.$settings.dataProperty]:t.data)},e.prototype.dispatch=function(t){for(var e=0,r=this.listeners;e<r.length;e++){r[e].bind(this.query,t)}},e.prototype.send=function(t){var e=this;return new Promise(function(r,i){e.$http({url:e.query.$url,params:e.buildQueryParams(t),method:e.query.$method,withCredentials:e.withCredentials,headers:e.headers}).then(function(t){var i=e.handleResponse(t);r(i),e.dispatch(i)},function(t){i(t)})})},e.prototype.page=function(t){return this.query.$page=t,this.send()},e.prototype.prev=function(){return this.page(this.query.$page-1)},e.prototype.next=function(){return this.page(this.query.$page+1)},e.prototype.first=function(){return this.page(0)},e.prototype.last=function(){return this.page(Math.ceil(this.query.$total/this.query.$limit))},e.prototype.limit=function(t){return this.query.$limit=t,this.page(0)},e.prototype.order=function(t,e){return this.query.$orderBy=t,this.query.$orderDirection=e,this.send()},e.prototype.filter=function(t){return this.query.$filter=t,this.first()},e}(s.Subscribeable);e.DFClient=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),n=function(){function t(t,e,r,n){void 0===e&&(e="GET"),this.url=t,this.method=e,this.settings={page:0,limit:10,dataResponseType:s.BODY,countProperty:"x-count"},this.total=0,null!==r&&(this.settings=i.extend({},this.settings,r)),this.paramsMap=null===n?new o:n}return Object.defineProperty(t.prototype,"$settings",{get:function(){return this.settings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$url",{get:function(){return this.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$method",{get:function(){return this.method},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$page",{get:function(){return this.settings.page},set:function(t){this.settings.page=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$limit",{get:function(){return this.settings.limit},set:function(t){this.settings.limit=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$order",{get:function(){return[this.settings.orderBy instanceof Function?this.settings.orderBy():this.settings.orderBy,this.settings.orderDirection]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$orderBy",{set:function(t){this.settings.orderBy=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$orderDirection",{set:function(t){this.settings.orderDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$filter",{get:function(){return this.settings.filter instanceof Function?this.settings.filter():this.settings.filter},set:function(t){this.settings.filter=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$total",{get:function(){return this.total},set:function(t){this.total=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$paramsMap",{get:function(){return this.paramsMap},enumerable:!0,configurable:!0}),t}();e.default=n;var o=function(){function t(){this.page="page",this.limit="limit",this.orderBy="order_by",this.orderDirection="order_direction",this.filter="q"}return t}();e.DFDefaultParamsMap=o;!function(t){t[t.ASC=0]="ASC",t[t.DESC=1]="DESC"}(e.DFOrderDirection||(e.DFOrderDirection={}));var s;!function(t){t[t.PROPERTY=0]="PROPERTY",t[t.BODY=1]="BODY"}(s=e.DFDataResponseType||(e.DFDataResponseType={}))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.listeners=[]}return t.prototype.subscribe=function(t){this.listeners.push(t)},t.prototype.unsubscribe=function(t){this.listeners=this.listeners.filter(function(e){return e!==t})},t}();e.Subscribeable=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),n=r(6),o=r(3),s=function(){function t(){this.restrict="E",this.transclude=!0,this.bindToController=!0,this.template="<ng-transclude></ng-transclude>",this.controllerAs="$df",this.scope={query:"=?",client:"=?",autoload:"=?"},this.controller=n.DatafreeDirectiveController}return t}();e.DatafreeDirective=s;var a=function(){function t(){this.restrict="ACE",this.transclude="element",this.require="^^datafree",this.link=function(t,e,r,i,n){e.parent()}}return t}();e.DatafreeRow=a;var u=function(){function t(){this.restrict="ACE",this.transclude="element",this.require="^^datafree",this.link=function(t,e,r,n,o){var s,a=function(t){i.isUndefined(t)||i.isArray(t)&&0===t.length||i.isObject(t)&&Object.keys(t).length>0?s.show():s.hide()};n.subscribe(a),t.$on("$destroy",function(){n.unsubscribe(a)}),o(function(t,r){s=t,t.append(e.children()),e.parent().append(t)})}}return t}();e.DatafreeEmpty=u;var c=function(){function t(){this.restrict="E",this.require=["datafreePager","^^datafree"],this.scope={numberLimit:"@?",showFirst:"@?",showPrev:"@?",showNext:"@?",showLast:"@?",firstLabel:"@?",prevLabel:"@?",nextLabel:"@?",lastLabel:"@?"},this.templateUrl="/views/datafree-pager.html",this.bindToController=!0,this.controllerAs="$pager",this.controller=n.DatafreePagerDirectiveController,this.link=function(t,e,r,i){i[0].datafree=i[1]}}return t}();e.DatafreePager=c;var f=function(){function t(){this.restrict="A",this.require="^^datafree",this.scope={column:"@datafreeOrder"},this.link=function(t,e,r,n){function s(){var r=n.query.$orderBy,i=n.query.$orderDirection;e.addClass("sortable"),t.column===r&&(e.addClass(i===o.DFOrderDirection.DESC?"sort-down":"sort-up"),t.direction=i)}t.direction=null,n.subscribe(s),t.$on("$destroy",function(){n.unsubscribe(s)}),e.on("click",function(){e.parent().children().forEach(function(t){i.element(t).removeClass("sort-up").removeClass("sort-down")});var r=t.direction;t.column!==n.query.$orderBy&&null!==r||(r=r===o.DFOrderDirection.ASC?"DESC":"ASC"),n.order(t.column,r)})}}return t}();e.DatafreeOrder=f},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),o=function(t){function e(e){var r=t.call(this)||this;return r.clientFactory=e,r.autoload=!0,r}return i(e,t),e.prototype.dispatch=function(t){var e=this;this.listeners.forEach(function(r){r.bind(e,t)()})},e.prototype.dataListener=function(t){this.data=t,this.dispatch(t)},Object.defineProperty(e.prototype,"$data",{get:function(){return this.data},enumerable:!0,configurable:!0}),e.prototype.prev=function(){return this.client.prev()},e.prototype.next=function(){return this.client.next()},e.prototype.first=function(){return this.client.first()},e.prototype.last=function(){return this.client.last()},e.prototype.order=function(t,e){return this.client.order(t,e)},e.prototype.limit=function(t){return this.client.limit(t)},e.prototype.filter=function(t){return this.client.filter(t)},e.prototype.$onInit=function(){if(null!==this.query&&null===this.client)this.client=this.clientFactory.createClient(this.query);else if(null===this.query&&null===this.client)throw new Error("Either a DBQuery or a DBClient object must be provided to Datafree.");this.client.subscribe(this.dataListener)},e.prototype.$postLink=function(){1==this.autoload&&this.client.send()},e.prototype.$onDestroy=function(){this.client.unsubscribe(this.dataListener)},e}(n.Subscribeable);e.DatafreeDirectiveController=o,o.$inject=["DFClientFactory"];var s=function(){function t(){this.numberLimit=5,this.firstLabel="First",this.lastLabel="Last",this.prevLabel="Back",this.nextLabel="Next",this.showFirst=!0,this.showPrev=!0,this.showNext=!0,this.showLast=!0,this.numbers=[],this.currentPage=1,this.limit=10,this.maxPages=1,this.total=0}return t.prototype.dataChange=function(){this.currentPage=this.datafree.query.$page,this.limit=this.datafree.query.$limit,this.total=this.datafree.query.$total,this.maxPages=Math.ceil(this.total/this.limit);var t=Math.floor(this.numberLimit/2);if(this.numbers=[],t>0)for(var e=Math.max(1,this.currentPage-t),r=Math.min(e+this.numberLimit,this.maxPages),i=e;i<=r;i++)this.numbers.push(i)},t.prototype.$postLink=function(){this.datafree.subscribe(this.dataChange)},t.prototype.$onDestroy=function(){this.datafree.unsubscribe(this.dataChange)},t}();e.DatafreePagerDirectiveController=s}]);